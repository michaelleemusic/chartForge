<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>chartForge</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700&family=Noto+Sans:wght@300;400;700&family=Libre+Caslon+Text:wght@400;700&family=Lato:wght@300;400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
</head>
<body>
  <div class="app-container">
    <!-- Editor Panel (Left) -->
    <div class="editor-panel">
      <div class="editor-header">
        <h1>chartForge</h1>
      </div>
      <div class="toolbar">
        <div class="search-container">
          <input type="text" class="search-input" id="song-search" placeholder="Search songs..." autocomplete="off">
          <div class="search-results" id="search-results"></div>
        </div>
        <button class="toolbar-btn" id="random-btn">Random</button>
        <div class="toolbar-divider"></div>
        <button class="toolbar-btn" id="new-btn">New</button>
        <button class="toolbar-btn" id="update-btn">Update</button>
        <button class="toolbar-btn toolbar-btn-danger" id="delete-btn">Delete</button>
        <div class="toolbar-divider"></div>
        <button class="toolbar-btn" id="import-pdf-btn">Import PDF</button>
        <button class="toolbar-btn" id="convert-numbers-btn">To Numbers</button>
        <input type="file" id="pdf-file-input" accept=".pdf" hidden>
      </div>
      <div class="editor-content">
        <div class="editor-wrapper">
          <pre id="backdrop" aria-hidden="true"><code id="highlight"></code></pre>
          <textarea id="input" spellcheck="false"></textarea>
        </div>
        <div class="error" id="error"></div>
      </div>
    </div>

    <!-- Preview Panel (Right) -->
    <div class="preview-panel">
      <div class="preview-header">
        <div class="page-controls">
          <button id="prev-btn" disabled>&larr; Prev</button>
          <span id="page-info">Page 1 of 1</span>
          <button id="next-btn" disabled>Next &rarr;</button>
        </div>
        <select id="display-mode" title="Display mode">
          <option value="full">Full Chart</option>
          <option value="chords">Chords Only</option>
          <option value="lyrics">Lyrics Only</option>
        </select>
        <select id="render-key" title="Render key">
          <option value="numbers">Numbers</option>
          <option value="C">Key of C</option>
          <option value="Db">Key of D♭</option>
          <option value="D">Key of D</option>
          <option value="Eb">Key of E♭</option>
          <option value="E">Key of E</option>
          <option value="F">Key of F</option>
          <option value="Gb">Key of G♭</option>
          <option value="G">Key of G</option>
          <option value="Ab">Key of A♭</option>
          <option value="A">Key of A</option>
          <option value="Bb">Key of B♭</option>
          <option value="B">Key of B</option>
        </select>
        <button class="download-btn" id="download-pdf-btn" title="Download PDF">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
            <polyline points="7 10 12 15 17 10"/>
            <line x1="12" y1="15" x2="12" y2="3"/>
          </svg>
          PDF
        </button>
        <button class="download-btn" id="download-fullset-btn" title="Download all keys as ZIP">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
            <polyline points="7 10 12 15 17 10"/>
            <line x1="12" y1="15" x2="12" y2="3"/>
          </svg>
          Full Set
        </button>
      </div>
      <div class="preview-container">
        <canvas id="chart-canvas"></canvas>
      </div>
    </div>
  </div>

  <!-- Context Menu -->
  <div id="context-menu" class="context-menu" hidden>
    <div class="context-menu-item" data-action="copy-chords">Copy Chords</div>
    <div class="context-menu-item" data-action="copy-lyrics">Copy Lyrics</div>
    <div class="context-menu-divider"></div>
    <div class="context-menu-item" data-action="strip-chords">Strip Chords</div>
    <div class="context-menu-item" data-action="strip-lyrics">Strip Lyrics</div>
  </div>

  <script src="app.js"></script>
</body>
</html>
